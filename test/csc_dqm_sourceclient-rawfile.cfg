process DQM = {

	
        source = DaqSource{
                untracked string readerPluginName = "CSCFileReader"
                untracked PSet readerPset = {
                        untracked vstring RUI18 = {
                                '/nfshome0/barvic/csc_00000000_EmuRUI18_Default_000_080422_140919_UTC.raw'
                        }
                        untracked vstring FED750 = {'RUI18'}
                        untracked int32 firstEvent = 0
                }
        }



       include "CondCore/DBCommon/data/CondDBSetup.cfi"
      es_source cscConditions = PoolDBESSource {
              using CondDBSetup
              VPSet toGet = {
                      #  { string record = "CSCDBGainsRcd"
                      #      string tag = "CSCDBGains_ideal" },
                      #  { string record = "CSCDBCrosstalkRcd"
                      #      string tag = "CSCDBCrosstalk_ideal" },
                      #  { string record = "CSCDBNoiseMatrixRcd"
                      #      string tag = "CSCDBNoiseMatrix_ideal" },
                      #  { string record = "CSCDBPedestalsRcd"
                      #      string tag = "CSCDBPedestals_ideal" },
                        { string record = "CSCChamberIndexRcd"
                           string tag = "CSCChamberIndex" },
                        { string record = "CSCChamberMapRcd"
                            string tag = "CSCChamberMap" },
                        { string record = "CSCCrateMapRcd"
                            string tag = "CSCCrateMap" },
                        { string record = "CSCDDUMapRcd"
                            string tag = "CSCDDUMap" }
                }

                string timetype = "runnumber"
             #   string connect = "frontier://(serverurl=http://frontier1.cms:8000/FrontierOn)(serverurl=http://frontier2.cms:8000/FrontierOn)(retrieve-ziplevel=0)/CMS_COND_ON_170_CSC"
             #   string connect = "frontier://(serverurl=http://frontier1.cms:8000/FrontierOn)(serverurl=http://frontier2.cms:8000/FrontierOn)(retrieve-ziplevel=0)/CMS_COND_ON_18x_CSC"
		string connect = "frontier://(proxyurl=http://localhost:3128)(serverurl=http://frontier1.cms:8000/FrontierOnProd)(serverurl=http://frontier2.cms:8000/FrontierOnProd)(retrieve-ziplevel=0)/CMS_COND_20X_CSC"
		

                untracked bool siteLocalConfig = false
                untracked uint32 authenticationMethod = 1
                untracked uint32 messagelevel = 0

        }


	module cscunpacker = CSCDCCUnpacker {
             untracked bool runDQM = true
             untracked bool Debug =  false
             untracked bool PrintEventNumber = false
             untracked bool UseExaminer = true       
             untracked uint32 ErrorMask = 0x0
                #0xDFCFEFFF 
             untracked uint32 ExaminerMask = 0x16CBF3F6
                #0x5FB3BF6
             untracked bool UnpackStatusDigis = true
             untracked bool isMTCCData = false
             InputTag InputObjects = source
        }	


	untracked PSet maxEvents = {untracked int32 input = 50000}

#  MessageLogger
  service = MessageLogger {
        untracked vstring destinations = { 
"cmsRun_log.txt", 
"cmsRun_errors.txt" }
        untracked vstring categories = { "FwkReport" }
        # Constrain mclog.txt to LogInfo output...
        untracked PSet cmsRun_log.txt = {
                        untracked int32 lineLength = 132
                        untracked bool noLineBreaks = true
                        untracked PSet FwkReport   = { untracked int32 limit = 0}
        }
        untracked PSet cmsRun_errors.txt = { untracked string threshold = "ERROR"}
  }


       #service = MessageLogger {
       #         vstring destinations = {"CSCDQM.log"}
       #         PSet CSCDQM.log     = { bool noLineBreaks = true   }
       #         PSet detailedInfo.txt = { int32  lineLength = 132    }
       #}
       
	service = CSCMonitor{
		untracked string BookingFile = "file:/nfshome0/barvic/config/emuDQMBooking.xml"
		untracked bool monitorVerbosity=false
		untracked bool   CSCDQMSaveRootFile = false
		untracked int32  EventsInterval = 10000 
		untracked string RootFileName ="DQM_CSC_Monitor.root"
		#FileInPath theMappingFile = "CondFormats/CSCObjects/data/csc_map.txt"
		FileInPath theMappingFile = "DQM/CSCMonitorModule/data/csc_map.txt"
	}

	service = ModuleWebRegistry{ }
	service = LockService{untracked vstring labels = {"source"}}


	### DQMStore Service
   include "DQMServices/Core/data/DQM.cfg"
//  replace DQMStore.referenceFileName = "reference file going here"
   replace DQMStore.verbose = 0
   replace DQM.collectorHost = "localhost"

   ####  DQM File Saving and Environment
   include "DQMServices/Components/data/DQMEnvironment.cfi"
   replace dqmSaver.convention       = "Online"
//   replace dqmSaver.dirName          = "/cms/mon/data/dropbox"
   replace dqmSaver.dirName          = "."
   replace dqmSaver.producer         = "DQM"
   replace dqmEnv.subSystemFolder    = "CSC"

// replace dqmSaver.saveByLumiSection =  1
// replace dqmSaver.saveByMinute      = -1
// replace dqmSaver.saveByEvent       = -1
   replace dqmSaver.saveByRun         =  1
   replace dqmSaver.saveAtJobEnd      = true



        path p = {cscunpacker, dqmEnv, dqmSaver}
	#path p = {cscunpacker, dqmEnv}
}

